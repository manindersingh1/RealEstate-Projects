<%@ Page Title="" Language="C#" MasterPageFile="~/Property_New.Master" AutoEventWireup="true"
    ValidateRequest="false" CodeBehind="Search.aspx.cs" Inherits="Property.Search" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxtoolkit" %>
<%@ Register TagName="PropertySearch" TagPrefix="uc" Src="~/Controls/PropertySearch.ascx" %>
<%@ Register TagName="ContactInfo" TagPrefix="uc" Src="~/Controls/ContactInfo.ascx" %>
<%@ Register TagName="SearchControl" TagPrefix="uc" Src="~/Controls/SearchControl.ascx" %>
<%@ Register TagName="SearchBar" TagPrefix="uc" Src="~/Controls/SearchBar.ascx" %>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <link href="slider/css/bootstrap.min.css" rel="stylesheet" />
    <link href="slider/css/bootstrap.css" rel="stylesheet" />
    <link href="slider/css/bootstrap-theme.css" rel="stylesheet" />
    <link href="slider/css/bootstrap-theme.min.css" rel="stylesheet" />
    <link href="slider/css/media-queries.css" rel="stylesheet" />
    <link href="slider/css/font.css" rel="stylesheet" />
    <link href="slider/css/ihover.css" rel="stylesheet" />
    <link href="slider/css/ihover.min.css" rel="stylesheet" />
    <link href="slider/css/font-awesome.css" rel="stylesheet" />
    <script src="slider/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="slider/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/jssor.js"></script>
    <script type="text/javascript" src="js/jssor.slider.js"></script>
    <script type="text/javascript" src="slider/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places"></script>
    

      <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
 <%--   <script type="text/javascript">
        var markers = [
        //alert("hii");
        <asp:Repeater ID="rptMarkers" runat="server">
        <ItemTemplate>
                 {
                 
                     "lat": '<%# Eval("lat") %>',
                     "lng": '<%# Eval("long") %>',                    
                    "description":"Address -" +'<%# Eval("Address") %>'+"",
                     "type": '2'
                 }
    </ItemTemplate>
    <SeparatorTemplate>
    ,
    </SeparatorTemplate>
    </asp:Repeater>
        ];
    </script>
    <script type="text/javascript">
        window.onload = function () {
            debugger;
            var mapOptions = {
                
                center: new google.maps.LatLng(markers[0].lat, markers[0].lng),
               zoom:75,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            //alert(markers[0].lat);
            var infoWindow = new google.maps.InfoWindow();
            var latlngbounds = new google.maps.LatLngBounds();
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);
            var trafficLayer = new google.maps.TrafficLayer();
            trafficLayer.setMap(map); 
            var i = 0;
            var interval = setInterval(function () {
                var data = markers[i]     
                var myLatlng = new google.maps.LatLng(data.lat, data.lng);
                var icon = "";
                //map.setZoom(55);
                switch (data.type) {
                    case "2":
                        icon = "red";
                        break;
                        //                case "Beach":           
                        //                    icon = "blue";           
                        //                    break;           
                        //                    case "2":         
                        //                        icon = "yellow";         
                        //                        break;         
                    case "1":
                        icon = "green";
                        break;
                }
                icon = "http://maps.google.com/mapfiles/ms/icons/" + icon + ".png";
                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                   
                    title: data.title,
                    animation: google.maps.Animation.DROP,
                    icon: new google.maps.MarkerImage(icon)
                });
                (function (marker, data) {
                    google.maps.event.addListener(marker, "click", function (e) {
                        infoWindow.setContent('<div style="width:250px;">' + data.description + '</div>');
                        // infoWindow.setContent(data.description);
                        infoWindow.open(map, marker);
                    });
                })(marker, data);
                latlngbounds.extend(marker.position);
                i++;
                if (i == markers.length) {
                    clearInterval(interval);
                    var bounds = new google.maps.LatLngBounds();
                    map.setCenter(latlngbounds.getCenter());
                    map.fitBounds(latlngbounds);
                }
            }, 80);
        }
    </script>--%>
    <ajaxtoolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </ajaxtoolkit:ToolkitScriptManager>
    <div class="left_section_bg">

        <div class="left_section_in_5">
            <div class="box5">
                <%
                    if (Session["SearchType"] == "Residential")
                    { %>
                <%--  <h2>Residential Properties</h2>--%>
                <%}
                    else if (Session["SearchType"] == "Commercial")
                    {%>
                <h2>Commercial Properties</h2>
                <%}
                    else if (Session["SearchType"] == "Condo")
                    { %>
                <h2>Condo Properties</h2>
                <%} %>
                <div class="In_bg">
                    <uc:SearchBar ID="SearchBar" runat="server" />
                </div>
               <%-- <div class="In_bg">
                    <div id="map" style="height: 400px; width: 1100px;">
                    </div>
                </div> --%>
                <div class="In_bg">
                    <uc:SearchControl ID="SearchControl" runat="server" />
                </div>
            </div>
        </div>
    </div>
</asp:Content>
